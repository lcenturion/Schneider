<html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Playa Energía</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="apple-touch-icon" href="../apple-touch-icon.png">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <link rel="stylesheet" href="../css/bootstrap.min.css">
       
        <link rel="stylesheet" href="../css/datepicker.min.css">
        <link rel="stylesheet" href="../css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="../css/main.css">
        <link href="https://fonts.googleapis.com/css?family=Heebo:100,300,400,500" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Trirong:100,300,400,500" rel="stylesheet">
        <link rel="stylesheet" href="../fonts/font-awesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
        <script src="../js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script> 
        <script src="../js/vendor/bootstrap-datepicker.min.js"></script>
        <script src="../js/vendor/bootstrap-datepicker.es.min.js"></script> 
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

        <style>
			.cuadro-consumo
			{
				width:500;
				height:250;
				border-width:1px;
				border-style:solid;
				border-color:#cccccc;
			}
            .cuadro-desc
            {
                margin-top:10px;
                margin-bottom:10px;
                width:500px;
                line-height:110%;
            }
            .energy
            {
                font-size:18pt;
                text-align:left;
                padding-left:20px;
            }
            .energy-value
            {
                font-size:22pt;
                text-align:right;
            }
            .demo-area
            {
                text-align:left;
            }
            .consumo-table
            {
                background-color:#eee;
                font-size:10pt;
            }
            .consumo-table td
            {
                padding:3px 3px;
                vertical-align:bottom;
                border: 1px solid #C0C0FF;
            }
            .numbers{ 
                font-size:18pt;
                text-align:right;
                padding-right:20px;
            }
            .energysubtext{ 
                font-size:16pt;
                text-align:left;
                padding-left:40px;
            }
            .numberssubtext{ 
                font-size:16pt;
                text-align:right;
                padding-right:20px;
            }
        </style>
        
        
<script>
//====================================================================================
google.charts.load('current', {'packages':['corechart','line', 'gauge']});
google.charts.setOnLoadCallback(init);

//var wsUri = "ws://200.40.153.99:8002";
 var wsUriMQTT = "ws://200.40.153.99:8002";
 var wsUriDocumentDb = "ws://127.0.0.1:8003";


var irigoyen = "2e0028000a47353138383138";
var tacuari = "310036001047353138383138";

//TOTALS

var chartActivePowerTotals;
var chartReactivePowerTotals;
var chartApparentPowerTotals;
var chartPowerFactorTotals;
var chartFrequencyTotals;
var charttempMeterTotals;
var chartTempPhotonTotals;

var activePowerTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var activePowerTotals_value = {};
activePowerTotals_value[irigoyen] = 0;
activePowerTotals_value[tacuari] = 0;

var reactivePowerTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var reactivePowerTotals_value = {};
reactivePowerTotals_value[irigoyen] = 0;
reactivePowerTotals_value[tacuari] = 0;

var apparentPowerTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var apparentPowerTotals_value = {};
apparentPowerTotals_value[irigoyen] = 0;
apparentPowerTotals_value[tacuari] = 0;

var powerFactorTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var powerFactorTotals_value = {};
powerFactorTotals_value[irigoyen] = 0;
powerFactorTotals_value[tacuari] = 0;

var frequencyTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var frequencyTotals_value = {};
frequencyTotals_value[irigoyen] = 0;
frequencyTotals_value[tacuari] = 0;

var thdTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var thdTotals_value = {};
thdTotals_value[irigoyen] = 0;
thdTotals_value[tacuari] = 0;

var tempMeterTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var tempMeterTotals_value = {};
tempMeterTotals_value[irigoyen] = 0;
tempMeterTotals_value[tacuari] = 0;

var tempPhotonTotals_array = [['Hora', 'Irigoyen', 'Tacuari']];
var tempPhotonTotals_value = {};
tempPhotonTotals_value[irigoyen] = 0;
tempPhotonTotals_value[tacuari] = 0; 

var activeEnergyTotals_value = {};
activeEnergyTotals_value[tacuari]=0;
activeEnergyTotals_value[irigoyen]=0;

var activePowerPkTotals_value = {};
activePowerPkTotals_value[tacuari]=0;
activePowerPkTotals_value[irigoyen]=0;

var activeEnergyRtDayTotals_value = {};
activeEnergyRtDayTotals_value[tacuari]=0;
activeEnergyRtDayTotals_value[irigoyen]=0;

//PHASE 1

var chartActivePowerPhase1;
var chartReactivePowerPhase1;
var chartApparentPowerPhase1;
var chartPowerFactorPhase1;
var chartTHDPhase1;

var activePowerPhase1_array = [['Hora', 'Irigoyen', 'Tacuari']];
var activePowerPhase1_value = {};
activePowerPhase1_value[irigoyen] = 0;
activePowerPhase1_value[tacuari] = 0;

var reactivePowerPhase1_array = [['Hora', 'Irigoyen', 'Tacuari']];
var reactivePowerPhase1_value = {};
reactivePowerPhase1_value[irigoyen] = 0;
reactivePowerPhase1_value[tacuari] = 0;

var apparentPowerPhase1_array = [['Hora', 'Irigoyen', 'Tacuari']];
var apparentPowerPhase1_value = {};
apparentPowerPhase1_value[irigoyen] = 0;
apparentPowerPhase1_value[tacuari] = 0;

var powerFactorPhase1_array = [['Hora', 'Irigoyen', 'Tacuari']];
var powerFactorPhase1_value = {};
powerFactorPhase1_value[irigoyen] = 0;
powerFactorPhase1_value[tacuari] = 0;

var thdPhase1_array = [['Hora', 'Irigoyen', 'Tacuari']];
var thdPhase1_value = {};
thdPhase1_value[irigoyen] = 0;
thdPhase1_value[tacuari] = 0;

var activeEnergyPhase1_value = {};
activeEnergyPhase1_value[tacuari]=0;
activeEnergyPhase1_value[irigoyen]=0;

//PHASE 2

var chartActivePowerPhase2;
var chartReactivePowerPhase2;
var chartApparentPowerPhase2;
var chartPowerFactorPhase2;
var chartTHDPhase2;

var activePowerPhase2_array = [['Hora', 'Irigoyen', 'Tacuari']];
var activePowerPhase2_value = {};
activePowerPhase2_value[irigoyen] = 0;
activePowerPhase2_value[tacuari] = 0;

var reactivePowerPhase2_array = [['Hora', 'Irigoyen', 'Tacuari']];
var reactivePowerPhase2_value = {};
reactivePowerPhase2_value[irigoyen] = 0;
reactivePowerPhase2_value[tacuari] = 0;

var apparentPowerPhase2_array = [['Hora', 'Irigoyen', 'Tacuari']];
var apparentPowerPhase2_value = {};
apparentPowerPhase2_value[irigoyen] = 0;
apparentPowerPhase2_value[tacuari] = 0;

var powerFactorPhase2_array = [['Hora', 'Irigoyen', 'Tacuari']];
var powerFactorPhase2_value = {};
powerFactorPhase2_value[irigoyen] = 0;
powerFactorPhase2_value[tacuari] = 0;

var thdPhase2_array = [['Hora', 'Irigoyen', 'Tacuari']];
var thdPhase2_value = {};
thdPhase2_value[irigoyen] = 0;
thdPhase2_value[tacuari] = 0;

var activeEnergyPhase2_value = {};
activeEnergyPhase2_value[tacuari]=0;
activeEnergyPhase2_value[irigoyen]=0;

//PHASE 3

var chartActivePowerPhase3;
var chartReactivePowerPhase3;
var chartApparentPowerPhase3;
var chartPowerFactorPhase3;
var chartTHDPhase3;

var activePowerPhase3_array = [['Hora', 'Irigoyen', 'Tacuari']];
var activePowerPhase3_value = {};
activePowerPhase3_value[irigoyen] = 0;
activePowerPhase3_value[tacuari] = 0;

var reactivePowerPhase3_array = [['Hora', 'Irigoyen', 'Tacuari']];
var reactivePowerPhase3_value = {};
reactivePowerPhase3_value[irigoyen] = 0;
reactivePowerPhase3_value[tacuari] = 0;

var apparentPowerPhase3_array = [['Hora', 'Irigoyen', 'Tacuari']];
var apparentPowerPhase3_value = {};
apparentPowerPhase3_value[irigoyen] = 0;
apparentPowerPhase3_value[tacuari] = 0;

var powerFactorPhase3_array = [['Hora', 'Irigoyen', 'Tacuari']];
var powerFactorPhase3_value = {};
powerFactorPhase3_value[irigoyen] = 0;
powerFactorPhase3_value[tacuari] = 0;

var thdPhase3_array = [['Hora', 'Irigoyen', 'Tacuari']];
var thdPhase3_value = {};
thdPhase3_value[irigoyen] = 0;
thdPhase3_value[tacuari] = 0;

var activeEnergyPhase3_value = {};
activeEnergyPhase3_value[tacuari]=0;
activeEnergyPhase3_value[irigoyen]=0;

// chartArea:{left:10,top:10}

var options = {
    title: '',
    fontSize:14,
    dataOpacity:0.5,
    curveType:'function',
    backgroundColor:'#ffffff',
    colors:['green','blue'],
    crosshair: { trigger: 'both', color:'#cccccc' },
    legend:{position: 'top', textStyle: {color: 'black', fontSize: 10}},
    orientation:'horizontal',
    tooltip:{textStyle: {color: '#000000'}, showColorCode: true},
    lineWidth:2,
    pointSize:8
};

var websocketMQTT;
// var websocketDDb;
function initWebSocket()
{
    websocketMQTT = new WebSocket(wsUriMQTT);
    websocketMQTT.onopen = function(evt) { onOpenMQTT(evt) };
    websocketMQTT.onclose = function(evt) { onCloseMQTT(evt) };
    websocketMQTT.onmessage = function(evt) { onMessageMQTT(evt) };
    websocketMQTT.onerror = function(evt) { onErrorMQTT(evt) };


//     websocketDDb = new WebSocket(wsUriDocumentDb);
//     websocketDDb.onopen = function(evt) { onOpenDDb(evt) };
//     websocketDDb.onclose = function(evt) { onCloseDDb(evt) };
//     websocketDDb.onmessage = function(evt) { onMessageDDb(evt) };
//     websocketDDb.onerror = function(evt) { onErrorDDb(evt) };
}   

function onOpenMQTT(evt)
{
    //alert("CONNECTED");
}
function onCloseMQTT(evt)
{
    //alert("Disconnected");
}
function onErrorMQTT(evt)
{
    //alert('Websocket Error:' + evt.data);
}

var max_activePowerTotals = 0;
var min_powerFactorTotals = null;

var max_activePowerIrigoyenPhase1 = 0;
var min_powerFactorIrigoyenPhase1 = null;

var max_activePowerIrigoyenPhase2 = 0;
var min_powerFactorIrigoyenPhase2 = null;

var max_activePowerIrigoyenPhase3 = 0;
var min_powerFactorIrigoyenPhase3 = null;

var max_activePowerTacuariPhase1 = 0;
var min_powerFactorTacuariPhase1 = null;

var max_activePowerTacuariPhase2 = 0;
var min_powerFactorTacuariPhase2 = null;

var max_activePowerTacuariPhase3 = 0;
var min_powerFactorTacuariPhase3 = null;

var contTacuari = 0;
var contIrigoyen = 0;
var acumTacuari = 0;
var acumIrigoyen = 0;

function onMessageMQTT(evt)
{
    //alert(evt.data);
    var msg = JSON.parse(evt.data.toString());
    var data = msg.data;
    switch (msg.topic)
    {
        case "fromMeters":

            switch (data.event)
            {
                case "Totals":
                    activePowerTotals_value[data.id] = data.actpwr*1;
                    reactivePowerTotals_value[data.id] = data.reapwr*1;
                    apparentPowerTotals_value[data.id] = data.apppwr*1;
                    powerFactorTotals_value[data.id] = data.pwrfc*1;
                    frequencyTotals_value[data.id] = data.freq*1;
                    activeEnergyTotals_value[data.id] = data.acten*1;
                    activeEnergyRtDayTotals_value[data.id] = data.actenrtday*1;
                    activePowerPkTotals_value[data.id] = data.actpwrpk*1;


                    
                //C = 471,24 + 170,82 + 1,19*max(actpwr[kW]) + 0,452*acten[kWh]
                //: Ctotal = C*(1,33383+1,5*(0,85-min(pwrfc)))    
                    var activePowerSumTotals = activePowerTotals_value[irigoyen] + activePowerTotals_value[tacuari];
                    var powerFactorSumTotals  = powerFactorTotals_value[irigoyen] + powerFactorTotals_value[tacuari];
                    var activeEnergySumTotals  = activeEnergyTotals_value[irigoyen] + activeEnergyTotals_value[tacuari];

                    if (activePowerPkTotals_value[irigoyen] >= activePowerPkTotals_value[tacuari])
                        max_activePowerTotals = activePowerPkTotals_value[irigoyen];
                    else{
                        max_activePowerTotals = activePowerPkTotals_value[tacuari]
                    }
                    
                    if (min_powerFactorTotals == null)
                        min_powerFactorTotals = powerFactorSumTotals;   
                    else if (powerFactorSumTotals < min_powerFactorTotals)
                        min_powerFactorTotals = powerFactorSumTotals ;
                        
                    
                    var costTotals = 471.24 + 170.82 * 25 + (3.28 * (max_activePowerTotals)) + (0.731 * activeEnergySumTotals / 1000);
                    costTotals = costTotals.toFixed(2);
                    document.getElementById('idCostTotals').innerHTML = '$ ' + costTotals;

                    var costTotalsIrigoyen = 471.24 / 2 + 170.82  * 12.5 + (3.28 * (activePowerPkTotals_value[irigoyen])) + (3.6 * activeEnergyTotals_value[irigoyen] / 1000000) + 0.731 * activeEnergyTotals_value[irigoyen] / 1000;
                    costTotalsIrigoyen = costTotalsIrigoyen.toFixed(2);
                    document.getElementById('idCostIrigoyenTotals').innerHTML = '$ ' + costTotalsIrigoyen;

                    var costTotalsTacuari = 471.24  / 2 + 170.82 * 12.5 + (3.28 * (activePowerPkTotals_value[tacuari])) + (3.6 * activeEnergyTotals_value[tacuari] / 1000000) + 0.731 * activeEnergyTotals_value[tacuari] / 1000;;
                    costTotalsTacuari = costTotalsTacuari.toFixed(2);
                    document.getElementById('idCostTacuariTotals').innerHTML = '$ ' + costTotalsTacuari;

                    showTotals();
                    break;

                case "One":
                    activePowerPhase1_value[data.id] = data.actpwr*1;
                    reactivePowerPhase1_value[data.id] = data.reapwr*1;
                    apparentPowerPhase1_value[data.id] = data.apppwr*1;
                    powerFactorPhase1_value[data.id] = data.pwrfc*1;
                    activeEnergyPhase1_value[data.id] = data.acten*1;
                    thdPhase1_value[data.id] = data.thdvln*1;

                    
                    
                //C = 471,24 + 170,82 + 1,19*max(actpwr[kW]) + 0,452*acten[kWh]
                //: Ctotal = C*(1,33383+1,5*(0,85-min(pwrfc)))    

                    if (activePowerPhase1_value[irigoyen] > max_activePowerIrigoyenPhase1)
                        max_activePowerIrigoyenPhase1 = activePowerPhase1_value[irigoyen];
                    
                    if (min_powerFactorIrigoyenPhase1 == null)
                        min_powerFactorIrigoyenPhase1 = powerFactorPhase1_value[irigoyen];   
                    else if (powerFactorPhase1_value[irigoyen] < min_powerFactorIrigoyenPhase1)
                        min_powerFactorIrigoyenPhase1 = powerFactorPhase1_value[irigoyen];
                        
                    
                    var costPhase1Irigoyen = 471.24 / 6 + 170.82 * 12.5 / 3 + (3.28 * (max_activePowerIrigoyenPhase1)) + (3.6 * activeEnergyPhase1_value[irigoyen]  / 1000000) + 0.731 * activeEnergyTotals_value[irigoyen] / 1000;
                    costPhase1Irigoyen = costPhase1Irigoyen.toFixed(2);
                    document.getElementById('idCostIrigoyenPhase1').innerHTML = '$ ' + costPhase1Irigoyen;

                    if (activePowerPhase1_value[tacuari] > max_activePowerTacuariPhase1)
                        max_activePowerTacuariPhase1 = activePowerPhase1_value[tacuari];
                    
                    if (min_powerFactorTacuariPhase1 == null)
                        min_powerFactorTacuariPhase1 = powerFactorPhase1_value[irigoyen];   
                    else if (powerFactorPhase1_value[irigoyen] < min_powerFactorTacuariPhase1)
                        min_powerFactorTacuariPhase1 = powerFactorPhase1_value[irigoyen];
                        
                    
                    var costPhase1Tacuari = 471.24 / 6 + 170.82 * 12.5 / 3 + (3.28 * (max_activePowerTacuariPhase1)) + (3.6 *activeEnergyPhase1_value[tacuari]  / 1000000) + 0.731 * activeEnergyTotals_value[tacuari] / 1000;
                    costPhase1Tacuari = costPhase1Tacuari.toFixed(2);
                    document.getElementById('idCostTacuariPhase1').innerHTML = '$ ' + costPhase1Tacuari;
                    // showPhase1();
                    break;

                case "Two":
                    activePowerPhase2_value[data.id] = data.actpwr*1;
                    reactivePowerPhase2_value[data.id] = data.reapwr*1;
                    apparentPowerPhase2_value[data.id] = data.apppwr*1;
                    powerFactorPhase2_value[data.id] = data.pwrfc*1;
                    activeEnergyPhase2_value[data.id] = data.acten*1;
                    thdPhase2_value[data.id] = data.thdvln*1;

                    
                    
                //C = 471,24 + 170,82 + 1,19*max(actpwr[kW]) + 0,452*acten[kWh]
                //: Ctotal = C*(1,33383+1,5*(0,85-min(pwrfc)))    
                     if (activePowerPhase2_value[irigoyen] > max_activePowerIrigoyenPhase2)
                        max_activePowerIrigoyenPhase2 = activePowerPhase2_value[irigoyen];
                    
                    if (min_powerFactorIrigoyenPhase2 == null)
                        min_powerFactorIrigoyenPhase2 = powerFactorPhase2_value[irigoyen];   
                    else if (powerFactorPhase2_value[irigoyen] < min_powerFactorIrigoyenPhase2)
                        min_powerFactorIrigoyenPhase2 = powerFactorPhase2_value[irigoyen];
                        
                    
                    var costPhase2Irigoyen = 471.24 / 6 + 170.82 * 12.5 / 3 + (3.28 * (max_activePowerIrigoyenPhase2)) + (3.6 * activeEnergyPhase2_value[irigoyen]  / 1000000) + 0.731 * activeEnergyTotals_value[irigoyen] / 1000;
                    costPhase2Irigoyen = costPhase2Irigoyen.toFixed(2);
                    document.getElementById('idCostIrigoyenPhase2').innerHTML = '$ ' + costPhase2Irigoyen;

                    if (activePowerPhase2_value[tacuari] > max_activePowerTacuariPhase2)
                        max_activePowerTacuariPhase2 = activePowerPhase2_value[tacuari];
                    
                    if (min_powerFactorTacuariPhase2 == null)
                        min_powerFactorTacuariPhase2 = powerFactorPhase2_value[irigoyen];   
                    else if (powerFactorPhase2_value[irigoyen] < min_powerFactorTacuariPhase2)
                        min_powerFactorTacuariPhase2 = powerFactorPhase2_value[irigoyen];
                        
                    
                    var costPhase2Tacuari = 471.24 / 6 + 170.82 * 12.5 / 3 + (3.28 * (max_activePowerTacuariPhase2)) + (3.6 * activeEnergyPhase2_value[tacuari]  / 1000000) + 0.731 * activeEnergyTotals_value[tacuari] / 1000;
                    costPhase2Tacuari = costPhase2Tacuari.toFixed(2);
                    document.getElementById('idCostTacuariPhase2').innerHTML = '$ ' + costPhase2Tacuari;
                    // showPhase2();
                    break;

                case "Three":
                    activePowerPhase3_value[data.id] = data.actpwr*1;
                    reactivePowerPhase3_value[data.id] = data.reapwr*1;
                    apparentPowerPhase3_value[data.id] = data.apppwr*1;
                    powerFactorPhase3_value[data.id] = data.pwrfc*1;
                    activeEnergyPhase3_value[data.id] = data.acten*1;
                    thdPhase3_value[data.id] = data.thdvln*1;

                    
                    
                //C = 471,24 + 170,82 + 1,19*max(actpwr[kW]) + 0,452*acten[kWh]
                //: Ctotal = C*(1,33383+1,5*(0,85-min(pwrfc)))    
                     if (activePowerPhase3_value[irigoyen] > max_activePowerIrigoyenPhase3)
                        max_activePowerIrigoyenPhase3 = activePowerPhase3_value[irigoyen];
                    
                    if (min_powerFactorIrigoyenPhase3 == null)
                        min_powerFactorIrigoyenPhase3 = powerFactorPhase3_value[irigoyen];   
                    else if (powerFactorPhase3_value[irigoyen] < min_powerFactorIrigoyenPhase3)
                        min_powerFactorIrigoyenPhase3 = powerFactorPhase3_value[irigoyen];
                        
                    
                    var costPhase3Irigoyen = 471.24 / 6 + 170.82 * 12.5 / 3 + (3.28 * (max_activePowerIrigoyenPhase3)) + (3.6 * activeEnergyPhase3_value[irigoyen]  / 1000000) + 0.731 * activeEnergyTotals_value[irigoyen] / 1000;
                    costPhase3Irigoyen = costPhase3Irigoyen.toFixed(2);
                    document.getElementById('idCostIrigoyenPhase3').innerHTML = '$ ' + costPhase3Irigoyen;

                    if (activePowerPhase3_value[tacuari] > max_activePowerTacuariPhase3)
                        max_activePowerTacuariPhase3 = activePowerPhase3_value[tacuari];
                    
                    if (min_powerFactorTacuariPhase3 == null)
                        min_powerFactorTacuariPhase3 = powerFactorPhase3_value[irigoyen];   
                    else if (powerFactorPhase3_value[irigoyen] < min_powerFactorTacuariPhase3)
                        min_powerFactorTacuariPhase3 = powerFactorPhase3_value[irigoyen];
                        
                    
                    var costPhase3Tacuari = 471.24 / 6 + 170.82 * 12.5 / 3 + (3.28 * (max_activePowerTacuariPhase3)) + (3.6 * activeEnergyPhase3_value[tacuari]  / 1000000) + 0.731 * activeEnergyTotals_value[tacuari] / 1000;
                    costPhase3Tacuari = costPhase3Tacuari.toFixed(2);
                    document.getElementById('idCostTacuariPhase3').innerHTML = '$ ' + costPhase3Tacuari;
                    // showPhase3();
                    break;
            }
            break;
        case "fromTemperature":
            tempMeterTotals_value[data.id] = data.metertemp*1;
            tempPhotonTotals_value[data.id] = data.sensortemp*1;

            if(contTacuari == 5){
                var promedioTempTacuari = acumTacuari/5;
                contTacuari=0;
                acumTacuari=0;
                if (promedioTempTacuari > 25){
                    console.log("La temperatura de Tacuari superó los 25 grados");
                }
            }

            if(contIrigoyen == 5){
                var promedioTempIrigoyen = acumIrigoyen/5;
                contIrigoyen=0;
                acumIrigoyen=0;
                if (promedioTempIrigoyen > 25){
                    console.log("La temperatura de Irigoyen superó los 25 grados");
                }
            }


            if(data.id == irigoyen){
                acumIrigoyen += tempMeterTotals_value[data.id];
                contIrigoyen++;
            }
            else{
                acumTacuari += tempMeterTotals_value[data.id];
                contTacuari++;
            }
            
            break;
                
    }
    
    
}

// function onOpenDDb(evt)
// {
//     //alert("CONNECTED");
// }
// function onCloseDDb(evt)
// {
//     //alert("Disconnected");
// }
// function onErrorDDb(evt)
// {
//     //alert('Websocket Error:' + evt.data);
// }

// function onMessageDDb(evt)
// {
//     console.log(evt.data);
//     var consulta = JSON.parse(evt.data.toString());
//     if (consulta.type == "entreFechas")
//     {
//         if (Object.keys(consulta.data).length == 0)
//         {
//             document.getElementById('datosEntreFechas').innerHTML ="No se encontraron datos";
//         }
//         else
//         {
//             document.getElementById('datosEntreFechas').innerHTML =`
//             <ul>
//                 <li>
//                 Potencia activa máxima: ` + consulta.data.maxActivePower.toFixed(2) +
//                 `
//                 </li>
//                 <li>
//                 Potencia reactiva mínima: ` + consulta.data.minReactivePower.toFixed(2) +
//                 `
//                 </li>
//                 <li>
//                 Potencia aparente máxima: ` + consulta.data.maxApparentPower.toFixed(2) +
//                 `
//                 </li>
//                 <li>
//                 Factor de potencia mínimo: ` + consulta.data.minPowerFactor.toFixed(2) +
//                 `
//                 </li>
//                 <li>
//                 Frecuencia promedio: ` + consulta.data.avgFrequency.toFixed(2) +
//                 `
//                 </li>
//                 <li>
//                 Temperatura externa máxima: ` + consulta.data.maxTempPhoton.toFixed(2) +
//                 `
//                 </li>
//             </ul>
//             `
//         }
//     }
//     else
//     {
//         if (consulta.data == null)
//         {
//             document.getElementById('datosConsumoMes').innerHTML ="No se encontraron datos";
//         }
//         else
//         {
//             document.getElementById('datosConsumoMes').innerHTML =`
//             <ul>
//                 <li>
//                 Active Energy del mes: ` + consulta.data +
//                 `
//                 </li>
//             </ul>
//             `
//         }
//     }

// }


function init()
{

    //TOTALS

    chartActivePowerTotals = new google.visualization.LineChart(document.getElementById('idActivePowerTotals'));
    chartReactivePowerTotals = new google.visualization.LineChart(document.getElementById('idReactivePowerTotals'));

    chartApparentPowerTotals = new google.visualization.LineChart(document.getElementById('idApparentPowerTotals'));
    chartPowerFactorTotals = new google.visualization.LineChart(document.getElementById('idPowerFactorTotals'));

    chartFrequencyTotals = new google.visualization.LineChart(document.getElementById('idFrequencyTotals'));

    charttempMeterTotals = new google.visualization.LineChart(document.getElementById('idtempMeterTotals'));
    chartTempPhotonTotals = new google.visualization.LineChart(document.getElementById('idTempPhotonTotals'));

    // //PHASE 1
    
    // chartActivePowerPhase1 = new google.visualization.LineChart(document.getElementById('idActivePowerPhase1'));
    // chartReactivePowerPhase1 = new google.visualization.LineChart(document.getElementById('idReactivePowerPhase1'));

    // chartApparentPowerPhase1 = new google.visualization.LineChart(document.getElementById('idApparentPowerPhase1'));
    // chartPowerFactorPhase1 = new google.visualization.LineChart(document.getElementById('idPowerFactorPhase1'));

    // chartTHDPhase1 = new google.visualization.LineChart(document.getElementById('idTHDPhase1'));

    // //PHASE 2
    
    // chartActivePowerPhase2 = new google.visualization.LineChart(document.getElementById('idActivePowerPhase2'));
    // chartReactivePowerPhase2 = new google.visualization.LineChart(document.getElementById('idReactivePowerPhase2'));

    // chartApparentPowerPhase2 = new google.visualization.LineChart(document.getElementById('idApparentPowerPhase2'));
    // chartPowerFactorPhase2 = new google.visualization.LineChart(document.getElementById('idPowerFactorPhase2'));

    // chartTHDPhase2 = new google.visualization.LineChart(document.getElementById('idTHDPhase2'));


    // //PHASE 3
    
    // chartActivePowerPhase3 = new google.visualization.LineChart(document.getElementById('idActivePowerPhase3'));
    // chartReactivePowerPhase3 = new google.visualization.LineChart(document.getElementById('idReactivePowerPhase3'));

    // chartApparentPowerPhase3 = new google.visualization.LineChart(document.getElementById('idApparentPowerPhase3'));
    // chartPowerFactorPhase3 = new google.visualization.LineChart(document.getElementById('idPowerFactorPhase3'));

    // chartTHDPhase3 = new google.visualization.LineChart(document.getElementById('idTHDPhase3'));


    initWebSocket();
    showTotals();
    // showPhase1();
    // showPhase2();
    // showPhase3();

}

function showTotals()
{
    var SHOW = 6;
    var t = new Date();
    
    //var hour = ("0" + t.getHours()).slice(-2)
    var min = ("0" + t.getMinutes()).slice(-2)
    var sec = ("0" + t.getSeconds()).slice(-2)


    var hm = /*hour + ":" +*/ min + ":" + sec;    

    document.getElementById('idActiveEnergyTotals').innerHTML = (activeEnergyTotals_value[irigoyen] +  activeEnergyTotals_value[tacuari]) / 1000
    
    if(activePowerTotals_array.length > SHOW)
        activePowerTotals_array.splice(1,1);
    activePowerTotals_array.push([hm,activePowerTotals_value[irigoyen], activePowerTotals_value[tacuari]])
    var data = google.visualization.arrayToDataTable(activePowerTotals_array);
    options.title ="Potencia Activa Total";
    chartActivePowerTotals.draw(data, options);        
    
    if(reactivePowerTotals_array.length > SHOW)
        reactivePowerTotals_array.splice(1,1);
    reactivePowerTotals_array.push([hm,reactivePowerTotals_value[irigoyen], reactivePowerTotals_value[tacuari]])
    var data = google.visualization.arrayToDataTable(reactivePowerTotals_array);
    options.title ="Potencia Reactiva Total";
    chartReactivePowerTotals.draw(data, options);        
    
    if(apparentPowerTotals_array.length > SHOW)
        apparentPowerTotals_array.splice(1,1);
    apparentPowerTotals_array.push([hm,apparentPowerTotals_value[irigoyen], apparentPowerTotals_value[tacuari]])
    var data = google.visualization.arrayToDataTable(apparentPowerTotals_array);
    options.title ="Potencia Aparente Total";
    chartApparentPowerTotals.draw(data, options);        
    
    if(powerFactorTotals_array.length > SHOW)
        powerFactorTotals_array.splice(1,1);
    powerFactorTotals_array.push([hm,powerFactorTotals_value[irigoyen], powerFactorTotals_value[tacuari]])
    var data = google.visualization.arrayToDataTable(powerFactorTotals_array);
    options.title ="Factor de Potencia Total";
    chartPowerFactorTotals.draw(data, options);        
    
    if(frequencyTotals_array.length > SHOW)
        frequencyTotals_array.splice(1,1);
    frequencyTotals_array.push([hm,frequencyTotals_value[irigoyen], frequencyTotals_value[tacuari]])
    var data = google.visualization.arrayToDataTable(frequencyTotals_array);
    options.title ="Frequencia";
    chartFrequencyTotals.draw(data, options);     
    
    if(tempMeterTotals_array.length > SHOW)
        tempMeterTotals_array.splice(1,1);
    tempMeterTotals_array.push([hm,tempMeterTotals_value[irigoyen], tempMeterTotals_value[tacuari]])
    var data = google.visualization.arrayToDataTable(tempMeterTotals_array);
    options.title ="Temperatura Interna";
    charttempMeterTotals.draw(data, options);        
    
    if(tempPhotonTotals_array.length > SHOW)
        tempPhotonTotals_array.splice(1,1);
    tempPhotonTotals_array.push([hm,tempPhotonTotals_value[irigoyen], tempPhotonTotals_value[tacuari]])
    var data = google.visualization.arrayToDataTable(tempPhotonTotals_array);
    options.title ="Temperatura Externa";
    chartTempPhotonTotals.draw(data, options);  

}

// function showPhase1()
// {
//     var SHOW = 6;
//     var t = new Date();
    
//     //var hour = ("0" + t.getHours()).slice(-2)
//     var min = ("0" + t.getMinutes()).slice(-2)
//     var sec = ("0" + t.getSeconds()).slice(-2)


//     var hm = /*hour + ":" +*/ min + ":" + sec;    

//     document.getElementById('idActiveEnergyPhase1').innerHTML = (activeEnergyPhase1_value[irigoyen] +  activeEnergyPhase1_value[tacuari])/1000
    
//     if(activePowerPhase1_array.length > SHOW)
//         activePowerPhase1_array.splice(1,1);
//     activePowerPhase1_array.push([hm,activePowerPhase1_value[irigoyen], activePowerPhase1_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(activePowerPhase1_array);
//     options.title ="Potencia Activa Fase 1";
//     chartActivePowerPhase1.draw(data, options);        
    
//     if(reactivePowerPhase1_array.length > SHOW)
//         reactivePowerPhase1_array.splice(1,1);
//     reactivePowerPhase1_array.push([hm,reactivePowerPhase1_value[irigoyen], reactivePowerPhase1_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(reactivePowerPhase1_array);
//     options.title ="Potencia Reactiva Fase 1";
//     chartReactivePowerPhase1.draw(data, options);        
    
//     if(apparentPowerPhase1_array.length > SHOW)
//         apparentPowerPhase1_array.splice(1,1);
//     apparentPowerPhase1_array.push([hm,apparentPowerPhase1_value[irigoyen], apparentPowerPhase1_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(apparentPowerPhase1_array);
//     options.title ="Potencia Aparente Fase 1";
//     chartApparentPowerPhase1.draw(data, options);        
    
//     if(powerFactorPhase1_array.length > SHOW)
//         powerFactorPhase1_array.splice(1,1);
//     powerFactorPhase1_array.push([hm,powerFactorPhase1_value[irigoyen], powerFactorPhase1_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(powerFactorPhase1_array);
//     options.title ="Factor de Potencia Fase 1";
//     chartPowerFactorPhase1.draw(data, options);        
    
//     if(thdPhase1_array.length > SHOW)
//         thdPhase1_array.splice(1,1);
//     thdPhase1_array.push([hm,thdPhase1_value[irigoyen], thdPhase1_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(thdPhase1_array);
//     options.title ="THD Fase 1";
//     chartTHDPhase1.draw(data, options);        
    
// }

// function showPhase2()
// {
//     var SHOW = 6;
//     var t = new Date();
    
//     //var hour = ("0" + t.getHours()).slice(-2)
//     var min = ("0" + t.getMinutes()).slice(-2)
//     var sec = ("0" + t.getSeconds()).slice(-2)


//     var hm = /*hour + ":" +*/ min + ":" + sec;    

//     document.getElementById('idActiveEnergyPhase2').innerHTML = (activeEnergyPhase2_value[irigoyen] +  activeEnergyPhase2_value[tacuari])/1000
    
//     if(activePowerPhase2_array.length > SHOW)
//         activePowerPhase2_array.splice(1,1);
//     activePowerPhase2_array.push([hm,activePowerPhase2_value[irigoyen], activePowerPhase2_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(activePowerPhase2_array);
//     options.title ="Potencia Activa Fase 2";
//     chartActivePowerPhase2.draw(data, options);        
    
//     if(reactivePowerPhase2_array.length > SHOW)
//         reactivePowerPhase2_array.splice(1,1);
//     reactivePowerPhase2_array.push([hm,reactivePowerPhase2_value[irigoyen], reactivePowerPhase2_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(reactivePowerPhase2_array);
//     options.title ="Potencia Reactiva Fase 2";
//     chartReactivePowerPhase2.draw(data, options);        
    
//     if(apparentPowerPhase2_array.length > SHOW)
//         apparentPowerPhase2_array.splice(1,1);
//     apparentPowerPhase2_array.push([hm,apparentPowerPhase2_value[irigoyen], apparentPowerPhase2_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(apparentPowerPhase2_array);
//     options.title ="Potencia Aparente Fase 2";
//     chartApparentPowerPhase2.draw(data, options);        
    
//     if(powerFactorPhase2_array.length > SHOW)
//         powerFactorPhase2_array.splice(1,1);
//     powerFactorPhase2_array.push([hm,powerFactorPhase2_value[irigoyen], powerFactorPhase2_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(powerFactorPhase2_array);
//     options.title ="Factor de Potencia Fase 2";
//     chartPowerFactorPhase2.draw(data, options);        
    
//     if(thdPhase2_array.length > SHOW)
//         thdPhase2_array.splice(1,1);
//     thdPhase2_array.push([hm,thdPhase2_value[irigoyen], thdPhase2_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(thdPhase2_array);
//     options.title ="THD Fase 2";
//     chartTHDPhase2.draw(data, options);   
    
// }

// function showPhase3()
// {
//     var SHOW = 6;
//     var t = new Date();
    
//     //var hour = ("0" + t.getHours()).slice(-2)
//     var min = ("0" + t.getMinutes()).slice(-2)
//     var sec = ("0" + t.getSeconds()).slice(-2)


//     var hm = /*hour + ":" +*/ min + ":" + sec;    

//     document.getElementById('idActiveEnergyPhase3').innerHTML = (activeEnergyPhase3_value[irigoyen] +  activeEnergyPhase3_value[tacuari])/1000
    
//     if(activePowerPhase3_array.length > SHOW)
//         activePowerPhase3_array.splice(1,1);
//     activePowerPhase3_array.push([hm,activePowerPhase3_value[irigoyen], activePowerPhase3_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(activePowerPhase3_array);
//     options.title ="Potencia Activa Fase 3";
//     chartActivePowerPhase3.draw(data, options);        
    
//     if(reactivePowerPhase3_array.length > SHOW)
//         reactivePowerPhase3_array.splice(1,1);
//     reactivePowerPhase3_array.push([hm,reactivePowerPhase3_value[irigoyen], reactivePowerPhase3_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(reactivePowerPhase3_array);
//     options.title ="Potencia Reactiva Fase 3";
//     chartReactivePowerPhase3.draw(data, options);        
    
//     if(apparentPowerPhase3_array.length > SHOW)
//         apparentPowerPhase3_array.splice(1,1);
//     apparentPowerPhase3_array.push([hm,apparentPowerPhase3_value[irigoyen], apparentPowerPhase3_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(apparentPowerPhase3_array);
//     options.title ="Potencia Aparente Fase 3";
//     chartApparentPowerPhase3.draw(data, options);        
    
//     if(powerFactorPhase3_array.length > SHOW)
//         powerFactorPhase3_array.splice(1,1);
//     powerFactorPhase3_array.push([hm,powerFactorPhase3_value[irigoyen], powerFactorPhase3_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(powerFactorPhase3_array);
//     options.title ="Factor de Potencia Fase 3";
//     chartPowerFactorPhase3.draw(data, options);        
    
//     if(thdPhase3_array.length > SHOW)
//         thdPhase3_array.splice(1,1);
//     thdPhase3_array.push([hm,thdPhase3_value[irigoyen], thdPhase3_value[tacuari]])
//     var data = google.visualization.arrayToDataTable(thdPhase3_array);
//     options.title ="THD Fase 3";
//     chartTHDPhase3.draw(data, options);   
    
// }
//============================================================================================    

// $(document).ready(inicializar); 

// function inicializar(){
//     $('.input-daterange input').each(function() {
//         $(this).datepicker({language: 'es'});
//         $(this).datepicker('clearDates');
//     });

//     $('#monthPicker').datepicker({language:'es',minViewMode: 1, format:'03/mm/yyyy'});

//     $('#entreFechas').click(function(){
//         var data = new Object()
//         data.dateFrom = $('#dateFrom').datepicker("getDate").toISOString();
//         data.dateTo =  (new Date($('#dateTo').datepicker("getDate").setHours(23,59,59,999))).toISOString();
//         data.id = $("#radio-group input[type='radio']:checked").val();
//         data.query = "entreFechas";
//         data.phase = "Totals";
//         websocketDDb.send(JSON.stringify(data));
//     });

//     $('#consumoMes').click(function(){
//         var data = new Object()
//         data.dateFrom = $('#monthPicker').datepicker("getDate").toISOString();
//         data.dateTo =  new Date (new Date($('#monthPicker').datepicker("getDate").setMonth($('#monthPicker').datepicker("getDate").getMonth(),32)).setHours(23,59,59,999)).toISOString();
//         data.id = $("#radio-group input[type='radio']:checked").val();
//         data.query = "consumoMes";
//         data.phase = "Totals";
//         websocketDDb.send(JSON.stringify(data));
//     });
// }

</script>
        
        
        
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <header>
   <nav class="navbar navbar-default">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="index.html"><img class="img-responsive logo" src="../img/logo_logicalis.svg"></a>
       
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
       <li class="active"><a class=" noborder"  href="../index.html">Home<span class="sr-only">(current)</span></a></li>
        <li><a class="noborder" href="http://www.la.logicalis.com/contact/argentina/" target="_blank">Contacto</a></li>
        <!--<li><a href="#"><i class="fa fa-volume-up" aria-hidden="true"></i></a></li>-->
       
      </ul>
     
      
    </div><!-- /.navbar-collapse -->
    
  </div><!-- /.container -->
   <div class="leftleave">
 <img src="../img/leave-left.png" class="leftleaveimg">
 </div>
    <div class="rightleave">
 <img src="../img/rightcoconuts.png" class="rightleaveimg">
 </div>
</nav>
<div id="tagline">
<div class="col-md-3"></div>
<div class="col-md-6"> <img src="../img/tagline.png" class="img-responsive"></div>
<div class="col-md-3"></div>
</div> 
 
</header>

   
   

    <div class="container">
    <section id="intern_section">
      <!-- Example row of columns -->
      <div class="row">
        <div class="col-md-12">
	       <!-- <div class="assist follow-scroll"><a href="#" class="assistbutt"></a></div> -->
          <h4 class="blackfont bottom40">Playa Energía</h4>
          <h5 class="blackfont">Concepto</h5>
          <div class="row">
          <div class="col-md-4"><img src="../img/consumo.png" class="img-responsive centerimage"></div>
          <div class="col-md-8"><p class="intern_section_parag"<ul>
								<li class="listStyle">
									Medición de de todos los factores que inciden en el consumo. Industria y Retail
								</li>
								<li class="listStyle">
									Lectura por interfaz RS-485 de los medidores de consumo Schneider
								</li>
								<li class="listStyle">
									Obtención de los datos a través de un controller Photon de Particle
								</li>
								<li class="listStyle">
									Publicación de los datos a la nube de Particle
								</li>
								<li class="listStyle">
									Republicación de los datos a la nube Azure
								</li>
								<li class="listStyle">
									Valores medidos:
								</li>
							</ul>
              <div class="sublist">
Consumo total en kWh<br>
Costo total en pesos<br>
Potencia Activa<br>
Potencia Reactiva<br>
Potencia Aparente<br>
Factor de Potencia<br>
Frecuencia<br>
THD<br>
Temperatura interna<br>
Temperatura externa<br>
</div>
              </p></div>
          </div>         
        </div>
      </div>
      
         <div class="row bottom50">
        <div class="col-md-12">
          <h4 class="topbottom50 blackfont">Arquitectura</h4>
            <img src="../img/azure_graph.svg" class="img-responsive">   
        </div>
      </div>
      </section>
      
     
      <hr>

      
    </div>
      <section id="inner_demo">
      <div class="container-fluid">
      <div class="row green">
     <!-- <a class="customtogle" href="#demo_content" data-toggle="collapse">-->
      <h4 class="whitefont">Demo  <!--<i class="material-icons md-40">expand_more</i>--></h4>
      </a>
      <div id="demo_content" class="demo_content_style2 topbottom50">
      <div class="container">
<div class="row">
<h5 class="bottom50"> Demostración</h5>
<!-- <div style="margin-top:50px;font-size:14pt;">
                Ver valores entre fechas
                <div style="margin-top:10px;" class="col-md-3 input-group input-daterange">
                    <input type="text" id="dateFrom" class="form-control" readonly>
                    <div class="input-group-addon">a</div>
                    <input type="text" id="dateTo" class="form-control" readonly>
                    <div class="input-group-btn">
                      <button id="entreFechas" class="btn btn-default form-control" type="submit">
                        <i class="glyphicon glyphicon-search"></i>
                      </button>
                    </div>
                </div> 
                <div id="radio-group">
                    <label class="radio-inline" style="font-size:13pt"><input type="radio" name="optradio" value="2e0028000a47353138383138">Irigoyen</label>
                    <label class="radio-inline" style="font-size:13pt"><input type="radio" name="optradio" value="310036001047353138383138">Tacuari</label>
                    <label class="radio-inline" style="font-size:13pt"><input type="radio" checked="true" value="" name="optradio">Todos</label>
                </div>
                <div  style="margin-top:20px;font-size:10pt;" id="datosEntreFechas">
                </div>
            </div>
            <div style="margin-top:20px;font-size:14pt;">
                Elija mes
                <div style="margin-top:10px" class="col-md-3 input-group">
                    <input type="text" id="monthPicker" class="form-control" readonly>
                    <div class="input-group-btn">
                      <button id="consumoMes" class="btn btn-default form-control" type="submit">
                        <i class="glyphicon glyphicon-search"></i>
                      </button>
                    </div>
                </div> 
                <div  style="margin-top:20px;font-size:10pt;" id="datosConsumoMes">
                </div>
            </div> -->
		<!-- 	<div style="font-size:10pt;margin-bottom:10px;">
                <iframe name="result" style="display:none;"></iframe>
                <form target="result" action="https://api.particle.io/v1/devices/310036001047353138383138/setinterval?access_token=562810b39525e81f66b0d3d02bccdc5c7691de22" method="POST">
                    Frequencia de muestreo
                    <select name="args" class="dropdown">
                        <option selected="selected" value="5">5 segundos</option>
                        <option value="10">10 segundos</option>
                        <option value="15">15 segundos</option>
                    </select>
                    <input class="logicalisbutton" type="submit" value="Establecer">
                </form>			
            </div>  -->
            <div style="font-size:16pt;margin-bottom:10px;margin-left:-20px">Acceder a reportes en <a href="./powerbi-dashboard.html" target="_blank">PowerBI</a></div>
            <div style="font-size:16pt;margin-bottom:10px;margin-left:-20px">Ver Dashboard en <a href="https://app.powerbi.com/groups/me/dashboards/ee89345d-4a39-45e6-ab47-feb57ca12241" target="_blank">PowerBI</a></div>
            <div style="font-size:16pt;margin-bottom:10px;margin-left:-20px">Ir a demo de <a href="./alarm.html" target="_blank">Twilio</a></div>
            <table class="consumo-table">
				<!--COMIENZO TOTAL-->
                <tr>
                    <td>
                        <div class="energy">Consumo Total en kWh</div>

                    </td>
                    <td>
                        <div id="idActiveEnergyTotals" class="numbers" class="energy"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="energy">Consumo Total en Pesos</div>
                    </td>
                    <td>
                        <div id="idCostTotals" class="numbers" class="energy"></div>
                    </td>
                </tr> 
                <tr>
                    <td>
                        <div class="energy">Irigoyen:</div>
                    </td>
                </tr> 
                <tr>
                    <td>
                        <div class="energysubtext">Consumo Total</div>
                    </td> 
                    <td>
                        <div id="idCostIrigoyenTotals" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="energysubtext">Fase 1</div>
                    </td>
                    <td>
                        <div id="idCostIrigoyenPhase1" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="energysubtext">Fase 2</div>
                    </td>
                    <td>
                        <div id="idCostIrigoyenPhase2" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="energysubtext">Fase 3</div>
                    </td>
                    <td>
                        <div id="idCostIrigoyenPhase3" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="energy">Tacuarí:</div>
                    </td>
                </tr> 
                <tr>
                    <td>
                        <div class="energysubtext">Consumo Total</div>
                    </td>
                    <td>
                        <div id="idCostTacuariTotals" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="energysubtext">Fase 1</div>
                    </td>
                    <td>
                        <div id="idCostTacuariPhase1" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="energysubtext">Fase 2</div>
                    </td>
                    <td>
                        <div id="idCostTacuariPhase2" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="energysubtext">Fase 3</div>
                    </td>
                    <td>
                        <div id="idCostTacuariPhase3" class="numberssubtext" class="energy"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Se aprovecha como potencia útil y es debida a los dispositivos resistivos. Valores positivos indican consumo y valores negativos indican entrega de energía a la red eléctrica.</div>
                        <div id="idActivePowerTotals" class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Requerida por bobinas y condensadores para generar campos magnéticos o eléctricos, fluctúa por la red entre el generador y los receptores y no se transforma en trabajo efectivo. Valores positivos evidencian cargas inductivas y valores negativos evidencian cargas capacitivas.</div>
                        <div id="idReactivePowerTotals"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Es la totalidad de la potencia consumida por la carga, la suma vectorial de las potencias activa y reactiva.</div>
                        <div id="idApparentPowerTotals"  class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Coseno del ángulo entre potencia activa y reactiva.</div>
                        <div id="idPowerFactorTotals"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Temperatura Interna del Tablero Eléctrico</div>
                        <div id="idtempMeterTotals"  class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Temperatura Externa al Tablero Eléctrico</div>
                        <div id="idTempPhotonTotals"  class="cuadro-consumo"></div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Proveniente de la señal sinusoidal con la que se alimenta al medidor.</div>
                        <div id="idFrequencyTotals"  class="cuadro-consumo"></div>

                    </td>
                    <td>
                    </td>
                
                </tr>
            <!-- FIN TOTAL-->
            <!--COMIENZO FASE 1-->
               <!--  <tr>
                    <td>
                        <div style="margin-top:30px;" class="energy">Consumo Fase 1 en kWh</div>

                    </td>
                    <td>
                        <div style="margin-top:30px;" id="idActiveEnergyPhase1" class="energy"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div style="margin-top:30px;" class="energy">Consumo Fase 1 en Pesos</div>
                    </td>
                    <td>
                        <div style="margin-top:30px;" id="idCostPhase1" class="energy"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Se aprovecha como potencia útil y es debida a los dispositivos resistivos. Valores positivos indican consumo y valores negativos indican entrega de energía a la red eléctrica.</div>
                        <div id="idActivePowerPhase1" class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Requerida por bobinas y condensadores para generar campos magnéticos o eléctricos, fluctúa por la red entre el generador y los receptores y no se transforma en trabajo efectivo. Valores positivos evidencian cargas inductivas y valores negativos evidencian cargas capacitivas.</div>
                        <div id="idReactivePowerPhase1"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Es la totalidad de la potencia consumida por la carga, la suma vectorial de las potencias activa y reactiva.</div>
                        <div id="idApparentPowerPhase1"  class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Coseno del ángulo entre potencia activa y reactiva.</div>
                        <div id="idPowerFactorPhase1"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Distorsión armónica total de la primera fase, el porcentaje indica qué parte de la potencia total de la señal se distribuye en armónicos de otras frecuencias por fuera de los 50Hz.</div>
                        <div id="idTHDPhase1"  class="cuadro-consumo"></div>
                    </td>

                    <td>
                    </td>
                
                </tr> -->
            <!-- FIN FASE 1-->
            <!--COMIENZO FASE 2-->
                   <!--   <td>
                        <div style="margin-top:30px;" class="energy">Consumo Fase 2 en kWh</div>

                    </td>
                    <td>
                        <div style="margin-top:30px;" id="idActiveEnergyPhase2" class="energy"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div style="margin-top:30px;" class="energy">Consumo Fase 2 en Pesos</div>
                    </td>
                    <td>
                        <div style="margin-top:30px;" id="idCostPhase2" class="energy"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Se aprovecha como potencia útil y es debida a los dispositivos resistivos. Valores positivos indican consumo y valores negativos indican entrega de energía a la red eléctrica.</div>
                        <div id="idActivePowerPhase2" class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Requerida por bobinas y condensadores para generar campos magnéticos o eléctricos, fluctúa por la red entre el generador y los receptores y no se transforma en trabajo efectivo. Valores positivos evidencian cargas inductivas y valores negativos evidencian cargas capacitivas.</div>
                        <div id="idReactivePowerPhase2"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Es la totalidad de la potencia consumida por la carga, la suma vectorial de las potencias activa y reactiva.</div>
                        <div id="idApparentPowerPhase2"  class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Coseno del ángulo entre potencia activa y reactiva.</div>
                        <div id="idPowerFactorPhase2"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Distorsión armónica total de la primera fase, el porcentaje indica qué parte de la potencia total de la señal se distribuye en armónicos de otras frecuencias por fuera de los 50Hz.</div>
                        <div id="idTHDPhase2"  class="cuadro-consumo"></div>
                    </td>
                    <td></td>
                </tr> -->
            <!-- FIN FASE 2 -->
            <!-- COMIENZO FASE 3 -->
               <!--  <tr>
                    <td>
                        <div style="margin-top:30px;" class="energy">Consumo Fase 3 en kWh</div>

                    </td>
                    <td>
                        <div style="margin-top:30px;" id="idActiveEnergyPhase3" class="energy"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div style="margin-top:30px;" class="energy">Consumo Fase 3 en Pesos</div>
                    </td>
                    <td>
                        <div style="margin-top:30px;" id="idCostPhase3" class="energy"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Se aprovecha como potencia útil y es debida a los dispositivos resistivos. Valores positivos indican consumo y valores negativos indican entrega de energía a la red eléctrica.</div>
                        <div id="idActivePowerPhase3" class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Requerida por bobinas y condensadores para generar campos magnéticos o eléctricos, fluctúa por la red entre el generador y los receptores y no se transforma en trabajo efectivo. Valores positivos evidencian cargas inductivas y valores negativos evidencian cargas capacitivas.</div>
                        <div id="idReactivePowerPhase3"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Es la totalidad de la potencia consumida por la carga, la suma vectorial de las potencias activa y reactiva.</div>
                        <div id="idApparentPowerPhase3"  class="cuadro-consumo"></div>

                    </td>
                    <td>
                        <div class="cuadro-desc">Coseno del ángulo entre potencia activa y reactiva.</div>
                        <div id="idPowerFactorPhase3"  class="cuadro-consumo"></div>
                    </td>
                
                </tr>
                <tr>
                    <td>
                        <div class="cuadro-desc">Distorsión armónica total de la primera fase, el porcentaje indica qué parte de la potencia total de la señal se distribuye en armónicos de otras frecuencias por fuera de los 50Hz.</div>
                        <div id="idTHDPhase3"  class="cuadro-consumo"></div>
                    </td>
                    <td></td>
                
                </tr> --> 
            <!-- FIN FASE 3-->  
                <tr>
                    <td colspan=2>Cargo fijo por mes: 471,24 $/mes.</td>
                </tr>
                <tr>
                    <td colspan="2">Cargo por potencia convenida: 170,82 $/kW-mes  (Se establece un máximo de demanda de potencia activa a consumir en el mes).</td>
                </tr>
                <tr>
                    <td colspan="2">Cargo por potencia adquirida: 3,28 $/kW-mes  (El máximo de demanda de potencia activa que verdaderamente se alcanzó en el mes).</td>
                </tr>
                <tr>
                    <td colspan="2">Cargo variable: 0,731 $/kWh (El cargo variable por los kWh consumidos).</td>
                </tr>
                <tr>
                    <td colspan="2">
                        Costo: $471,24 + $170,82 * 25[kW] + $3,28 * max(ActivePowerDemand[kW]) + $0,731 * ActiveEnergy[kWh]
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        Impuestos: <br/>
                        I.V.A.: 27% del Costo.<br/>
                        Contribuciones: 6,383% del Costo.<br/>
                        Factor de potencia: por cada centésimo menor a 0,85 se cobra un impuesto del 1,5% del valor de la tarifa.
                    </td>
                </tr>
                <tr>
                    <td colspan="2">
                        Costo Total: Costo * (1,33383 + 1,5 * (0,85 - min(PowerFactor))) <br/>
                        Sólo si el PowerFactor es menor a 0,85 en algún momento del mes. 
                    </td>
                </tr>
			</table>


</div>
</div>
</div>
      </div>
     
      </div>
      
      </section>
      
      
      
<div id="demo_content" class="demo_content_style topbottom50">
<div class="container">
<div class="row">
<h5 class="bottom50"> Servicios</h5>
<div class="col-md-6">  Monitoreo en tiempo real<br>
Generación de alarmas<br>
Gráficos comparativos de consumo<br>
</div>
<div class="col-md-6">Integración con aplicaciones de gestión<br>
Dashboards a la medida del cliente<br>
Modalidad SaaS (Software as a service)<br>
</div>
</div>
</div>
</div>
      
      
      
       <section id="inner_docu" class="bottom50marg">
      <div class="container-fluid">
      <div class="row greypink">
     <!-- <a class="customtogle" href="#docu_content" data-toggle="collapse"> -->
      <h4 class="whitefont">Documentación <!--<i class="material-icons md-40">expand_more</i>--></h4>
      </a>
      
      <div id="docu_content" class="demo_content_style2 topbottom50">
      <div class="container">
<div class="row">

<a href="https://login.microsoftonline.com" target="_blank">Nube Azure</a>
<br>
<a href="https://docs.microsoft.com/en-us/azure/event-hubs/event-hubs-create" target="_blank">Azure Event Hub</a>
<br>
<a href="https://build.particle.io" target="_blank">Nube Particle Development</a>
<br>
<a href="https://docs.particle.io/guide/getting-started/intro/photon/" target="_blank">Photon Guide</a>
<br>
<a href="https://docs.particle.io/reference/api/" target="_blank">Photon API Reference</a>
<br>
<a href="https://docs.particle.io/datasheets/photon-datasheet/" target="_blank">Photon Data Sheet</a>

<!--
<h5 class="bottom50"> Lorem Ipsum</h5>
<div class="col-md-6">  Reportes en tiempo real<br>
Integración con otros sistemas via API<br>
Especificación de zona donde realizar la prueba<br>
Pruebas de calidad de servicio on the fly<br>
</div>
<div class="col-md-6">  Comparativa con otros operadores<br>
Dashboards a la medida del cliente<br>
Modalidad SaaS (Software as a service)<br>
</div>
-->

</div>

</div>
</div>
</div>
      </div>
     
      </div>
      
      </section>
      
      
    <footer class="container-fluid">
    <div class="container-fluid">
      <div class="col-md-4"><a href="http://www.la.logicalis.com/" target="_blank"><img class="img-responsive logo_footer" src="../img/logo_logicalis.svg"></a></div>
       <div class="col-md-4"><img class="img-responsive palmera" src="../img/palmera.svg"></div>
      <div class="col-md-4">
      <div class="rightfloat">
      <a class="socialmedia noborder" href="https://www.youtube.com/user/LogicalisLatam" target="_blank"><i class="fa fa-youtube" aria-hidden="true"></i></a>
      <a class="socialmedia noborder"  href="https://www.facebook.com/LogicalisLatam" target="_blank"><i class="fa fa-facebook" aria-hidden="true"></i></a>
       <a class="socialmedia noborder"  href="https://twitter.com/logicalislatam" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
       <a class="socialmedia noborder"  href="https://www.linkedin.com/company/logicalis" target="_blank"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
       <a class="socialmedia noborder"  href="http://www.la.logicalis.com/news/rss/" target="_blank"><i class="fa fa-rss" aria-hidden="true"></i></a>
       <a class="link_footer noborder" href="http://www.la.logicalis.com/contact/argentina/" target="_blank">CONTACTO</a></div>
    </div>
    </div>
       
      </footer> <!-- /container -->        
      
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>

        <script src="../js/vendor/bootstrap.min.js"></script>
        <script src="../js/vendor/bootstrap-datepicker.min.js"></script>
        <script src="../js/vendor/bootstrap-datepicker.es.min.js"></script>
        <script src="../js/main.js"></script>
 <!--       
         <script>
        (function($) {
    var element = $('.follow-scroll'),
        originalY = element.offset().top;
    
    // Space between element and top of screen (when scrolling)
    var topMargin = 20;
    
    // Should probably be set in CSS; but here just for emphasis
    element.css('position', 'relative');
    
    $(window).on('scroll', function(event) {
        var scrollTop = $(window).scrollTop();
        
        element.stop(false, false).animate({
            top: scrollTop < originalY
                    ? 0
                    : scrollTop - originalY + topMargin
        }, 300);
    });
})(jQuery);</script>
-->
        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID.
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='//www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-XXXXX-X','auto');ga('send','pageview');
        </script>
         -->
    </body>
</html>
